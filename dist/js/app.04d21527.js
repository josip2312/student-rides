(function(e){function t(t){for(var r,a,o=t[0],c=t[1],u=t[2],d=0,l=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&l.push(s[a][0]),s[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);f&&f(t);while(l.length)l.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var o=n[a];0!==s[o]&&(r=!1)}r&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={app:0},s={app:0},i=[];function o(e){return c.p+"js/"+({ChatDashboard:"ChatDashboard",CreateRide:"CreateRide",EditProfile:"EditProfile",ForgotPassword:"ForgotPassword",Login:"Login",NewPassword:"NewPassword",NotFound:"NotFound",Profile:"Profile",Register:"Register",RegistrationSuccess:"RegistrationSuccess",RideDetails:"RideDetails",Rides:"Rides",UserDetails:"UserDetails"}[e]||e)+"."+{ChatDashboard:"dcfe82a4",CreateRide:"db1aee35",EditProfile:"f76d13d3",ForgotPassword:"77097e52",Login:"e1256d0e",NewPassword:"9f8ab428",NotFound:"8728df0d",Profile:"6640df92",Register:"9c30a447",RegistrationSuccess:"019e241a",RideDetails:"5fbe22f0",Rides:"effc195d",UserDetails:"d7865fa5"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={ChatDashboard:1,CreateRide:1,EditProfile:1,ForgotPassword:1,Login:1,NewPassword:1,NotFound:1,Profile:1,Register:1,RegistrationSuccess:1,RideDetails:1,Rides:1,UserDetails:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({ChatDashboard:"ChatDashboard",CreateRide:"CreateRide",EditProfile:"EditProfile",ForgotPassword:"ForgotPassword",Login:"Login",NewPassword:"NewPassword",NotFound:"NotFound",Profile:"Profile",Register:"Register",RegistrationSuccess:"RegistrationSuccess",RideDetails:"RideDetails",Rides:"Rides",UserDetails:"UserDetails"}[e]||e)+"."+{ChatDashboard:"13f7862c",CreateRide:"e0926219",EditProfile:"1e3bd475",ForgotPassword:"70bb9018",Login:"843ae3e4",NewPassword:"70bb9018",NotFound:"57cad371",Profile:"5e573426",Register:"e11a1002",RegistrationSuccess:"6366cafb",RideDetails:"d23cbc9d",Rides:"76877ca9",UserDetails:"0611588f"}[e]+".css",s=c.p+r,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var u=i[o],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===r||d===s))return t()}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){u=l[o],d=u.getAttribute("data-href");if(d===r||d===s)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||s,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[e],f.parentNode.removeChild(f),n(i)},f.href=s;var h=document.getElementsByTagName("head")[0];h.appendChild(f)})).then((function(){a[e]=0})));var r=s[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=s[e]=[t,n]}));t.push(r[2]=i);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=o(e);var l=new Error;u=function(t){d.onerror=d.onload=null,clearTimeout(f);var n=s[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",l.name="ChunkLoadError",l.type=r,l.request=a,n[1](l)}s[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var f=d;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"00ae":function(e,t,n){e.exports=n.p+"img/login.e7e1a24c.svg"},"04ba":function(e,t,n){e.exports=n.p+"img/friends.460a7ee3.svg"},"0730":function(e,t,n){"use strict";var r=n("2ce1"),a=n.n(r);a.a},1:function(e,t){},1118:function(e,t,n){},"1ba5":function(e,t,n){},2119:function(e,t,n){e.exports=n.p+"img/chevronDown.f26fa68c.svg"},"24fc":function(e,t,n){e.exports=n.p+"img/logout.895b2d8a.svg"},"2ce1":function(e,t,n){},"302b":function(e,t,n){e.exports=n.p+"img/path.cde3858a.svg"},"33c3":function(e,t,n){e.exports=n.p+"img/magnifier.4863a336.svg"},3602:function(e,t,n){e.exports=n.p+"img/gh.0b1fd02a.svg"},"3ee0":function(e,t,n){e.exports=n.p+"img/bg.3ec8bcf7.svg"},"3ff5":function(e,t,n){e.exports=n.p+"img/menu.5758ad56.svg"},4316:function(e,t,n){},4759:function(e,t,n){e.exports=n.p+"img/notfound.1011d5c3.svg"},"478a":function(e,t,n){e.exports=n.p+"img/xWhite.ff33a975.svg"},"479c":function(e,t,n){"use strict";var r=n("8a89"),a=n.n(r);a.a},"4ab2":function(e,t,n){e.exports=n.p+"img/x.c16be797.svg"},"4b8a":function(e,t,n){e.exports=n.p+"img/home.31fabcf7.svg"},5056:function(e,t,n){e.exports=n.p+"img/map.70e56d21.svg"},5236:function(e,t,n){e.exports=n.p+"img/check.e451e89d.svg"},5466:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("TheHeader"),n("div",{staticClass:"wrap"},[n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view")],1)],1),n("TheFooter"),n("TheSuccess"),n("TheLoader")],1)},s=[],i=n("5530"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"fade",mode:"out-in"}},[e.isSuccess?r("div",{staticClass:"success"},[r("img",{attrs:{src:n("478a"),alt:""},on:{click:e.clearSuccess}}),r("span",[e._v(" "+e._s(e.getSuccessMessage)+" ")])]):e._e()])},c=[],u=n("2f62"),d={name:"Success",computed:Object(i["a"])({},Object(u["c"])(["getSuccessMessage","isSuccess"])),methods:{clearSuccess:function(){this.$store.commit("CLEAR_SUCCESS")}}},l=d,f=(n("baf5"),n("2877")),h=Object(f["a"])(l,o,c,!1,null,"0fc87384",null),g=h.exports,m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",[r("div",{staticClass:"wrapper"},[r("div",{staticClass:"nav-left"},[r("div",{staticClass:"logo",on:{click:e.sendToLanding}},[e._v(" StudentRides ")])]),r("div",{staticClass:"nav-right"},[e.isLoggedIn?e._e():r("nav",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hideSidebar,expression:"hideSidebar"}],class:{isVisible:e.showSidebar}},[r("router-link",{attrs:{to:{name:"Landing"},tag:"a"},nativeOn:{click:function(t){return e.hideSidebar(t)}}},[e._v(" Početna ")]),r("router-link",{attrs:{to:{name:"Login"},tag:"a"},nativeOn:{click:function(t){return e.hideSidebar(t)}}},[e._v(" Prijava ")]),r("router-link",{attrs:{to:{name:"Register"},tag:"a"},nativeOn:{click:function(t){return e.hideSidebar(t)}}},[e._v(" Registracija ")])],1),e.isLoggedIn?r("nav",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hideSidebar,expression:"hideSidebar"}],class:{isVisible:e.showSidebar}},[r("router-link",{attrs:{to:{name:"Rides"},tag:"a"},nativeOn:{click:function(t){return e.hideSidebar(t)}}},[e._v(" Vožnje ")]),r("router-link",{attrs:{to:{name:"Profile"},tag:"a"},nativeOn:{click:function(t){return e.hideSidebar(t)}}},[e._v(" Profil ")]),r("router-link",{attrs:{to:{name:"ChatDashboard"},tag:"a"},nativeOn:{click:function(t){return e.hideSidebar(t)}}},[e._v(" Poruke ")]),r("a",{staticClass:"logout",attrs:{tabindex:"0"},on:{click:function(t){e.logout(),e.hideSidebar()}}},[e._v(" Odjavi se")])],1):e._e(),e.isLoggedIn?r("div",{staticClass:"nav-buttons"},[r("button",{staticClass:"notification-icon",attrs:{"aria-label":"Notifications",tabindex:"0"},on:{click:function(t){e.toggleNotifications(),e.hideUserDropdown()}}},[r("img",{attrs:{src:n("7028"),alt:"Notifications"}}),e.notificationNumber?r("div",{staticClass:"notifications-number"},[r("span",[e._v(" "+e._s(e.notificationNumber)+" ")])]):e._e()]),r("NotificationDropdownMenu",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hideNotifications,expression:"hideNotifications"}],attrs:{showNotifications:e.showNotifications},on:{"hide-notifications":e.hideNotifications}}),r("button",{staticClass:"user-icon",attrs:{"aria-label":"Profile info",tabindex:"0"},on:{click:function(t){e.toggleUserDropdown(),e.hideNotifications()}}},[r("img",{attrs:{src:e.getPhoto,alt:""}}),r("img",{attrs:{src:n("2119"),alt:""}})]),r("UserDropdownMenu",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hideUserDropdown,expression:"hideUserDropdown"}],attrs:{showUserDropdown:e.showUserDropdown},on:{"hide-user-dropdown":e.hideUserDropdown}})],1):e._e(),r("transition",{attrs:{name:"fade",mode:"out-in"}},[e.haveUnreadMessages?r("button",{staticClass:"unread-messages",class:{animate:e.isAnimated},on:{click:function(t){return t.preventDefault(),e.sendToChatDashboard(t)}}},[e._v(" "+e._s(e.receivingMessage)+" ")]):e._e()])],1)]),r("TheMobileNav")],1)},p=[],v=(n("4160"),n("b0c0"),n("159b"),n("e67d")),b=n.n(v),w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isMobile?r("div",{staticClass:"mobile-nav"},[e.isLoggedIn?r("div",{staticClass:"mobile-nav-wrapper"},[r("router-link",{attrs:{to:{name:"Landing"},tag:"a"}},[r("img",{attrs:{src:n("4b8a"),alt:"Home"}}),r("span",[e._v("Početna")])]),r("router-link",{attrs:{to:{name:"Rides"},tag:"a"}},[r("img",{attrs:{src:n("cca8"),alt:"Rides"}}),r("span",[e._v("Vožnje")])]),r("router-link",{attrs:{to:{name:"Profile"},tag:"a"}},[r("img",{attrs:{src:n("7393"),alt:"Profile"}}),r("span",[e._v("Moj Profil")])])],1):r("div",{staticClass:"mobile-nav-wrapper"},[r("router-link",{attrs:{to:{name:"Landing"},tag:"a"}},[r("img",{attrs:{src:n("4b8a"),alt:"Home"}}),r("span",[e._v("Početna")])]),r("router-link",{attrs:{to:{name:"Login"},tag:"a"}},[r("img",{attrs:{src:n("00ae"),alt:"Login"}}),r("span",[e._v("Prijava")])]),r("router-link",{attrs:{to:{name:"Register"},tag:"a"}},[r("img",{attrs:{src:n("e601"),alt:"Sign up"}}),r("span",[e._v("Registracija")])])],1)]):e._e()},R=[],_={name:"TheMobileNav",data:function(){return{windowWidth:window.innerWidth}},computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])(["isLoggedIn"])),{},{isMobile:function(){return this.windowWidth<=600}}),mounted:function(){var e=this;window.addEventListener("resize",(function(){e.windowWidth=window.innerWidth}))}},D=_,k=(n("c99c"),Object(f["a"])(D,w,R,!1,null,"7de49956",null)),x=k.exports,C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"grow-top",mode:"out-in"}},[e.showDropdown?r("div",{staticClass:"user-dropdown spacing-sm"},[r("router-link",{staticClass:"user-dropdown-profile",attrs:{to:{name:"Profile"}},nativeOn:{click:function(t){return e.hideUserDropdown(t)}}},[r("img",{attrs:{src:n("7393"),alt:"Profile"}}),r("span",[e._v(" Profil ")])]),r("router-link",{staticClass:"user-dropdown-rides",attrs:{to:{name:"Rides"}},nativeOn:{click:function(t){return e.hideUserDropdown(t)}}},[r("img",{attrs:{src:n("cca8"),alt:"Rides"}}),r("span",[e._v(" Vožnje ")])]),r("router-link",{staticClass:"user-dropdown-messages",attrs:{to:{name:"ChatDashboard"}},nativeOn:{click:function(t){return e.hideUserDropdown(t)}}},[r("img",{attrs:{src:n("e3e6"),alt:"Messages"}}),r("span",[e._v(" Poruke ")])]),r("a",{staticClass:"user-dropdown-logout",attrs:{tabindex:"0"},on:{click:function(t){e.logout(),e.hideUserDropdown()}}},[r("img",{attrs:{src:n("24fc"),alt:"Logout"}}),r("span",[e._v(" Odjavi se ")])])],1):e._e()])},j=[],E={computed:{showDropdown:function(){return this.showUserDropdown}},props:{showUserDropdown:{type:Boolean,required:!0}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["logout"])),{},{hideUserDropdown:function(){this.$emit("hide-user-dropdown")}})},O=E,S=(n("cd5d"),Object(f["a"])(O,C,j,!1,null,"05eb344b",null)),U=S.exports,I=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"grow-top",mode:"out-in"}},[e.showNotifications?r("div",{staticClass:"notifications-dropdown"},[r("section",{staticClass:"notifications-header"},[r("span",[e._v("Obavijesti")]),r("div",{staticClass:"notifications-check-icon",attrs:{title:"Oznaci sve kao procitano"}},[r("img",{attrs:{src:n("cb4a"),alt:"Check icon"},on:{click:function(t){return e.readAllNotifications(e.getUserData._id)}}})])]),e._l(e.getUserData.notifications,(function(t){return r("div",{key:t._id,staticClass:"notification",on:{click:function(n){e.readNotification({notificationId:t._id,userId:e.getUserData._id,rideId:t.rideId}),e.sendToRideDetails()}}},[r("span",[e._v(" "+e._s(t.message)+" ")]),r("button",{on:{click:function(n){return n.stopPropagation(),e.readNotification({notificationId:t._id,userId:e.getUserData._id,rideId:t.rideId})}}},[r("img",{staticClass:"remove-notification",attrs:{src:n("4ab2"),alt:""}})])])})),e.notificationNumber?e._e():r("div",{staticClass:"no-notifications"},[e._v(" Nemate obavijesti ")])],2):e._e()])},N=[],P={props:{showNotifications:{type:Boolean,required:!0}},computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])(["getUserData"])),{},{showNotif:function(){return this.showNotifications},notificationNumber:function(){return this.getUserData.notifications?this.getUserData.notifications.length:0}}),methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["readNotification","readAllNotifications"])),{},{hideNotifications:function(){this.$emit("hide-notifications")},sendToRideDetails:function(){"RideDetails"!==this.$router.history.current.name&&this.$router.push({name:"RideDetails"})}})},T=P,L=(n("7d07"),Object(f["a"])(T,I,N,!1,null,"118aea8a",null)),y=L.exports,A={name:"Header",components:{TheMobileNav:x,UserDropdownMenu:U,NotificationDropdownMenu:y},data:function(){return{backendUrl:"http://localhost:3000",showUserDropdown:!1,showNotifications:!1,showSidebar:!1,haveUnread:!1,receivingMessage:"",isAnimated:!1}},computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])(["isLoggedIn","getPhoto","getUserData","getChats","getLoggedInUser"])),{},{notificationNumber:function(){return this.getUserData.notifications?this.getUserData.notifications.length:0},haveUnreadMessages:function(){var e=this,t=!1;return!!this.haveUnread||(this.getChats.forEach((function(n){n.messages.length>0&&(n.messages[n.messages.length-1].receiverHasRead||n.messages[n.messages.length-1].sender===e.getUserData._id||(e.receivingMessage="Imate nepročitanih poruka",t=!0))})),t)}}),watch:{getLoggedInUser:function(){this.getLoggedInUser&&(this.$socket.disconnect(),this.$socket.connect())}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["logout"])),{},{animateAndPlayMessage:function(){var e=this;this.isAnimated=!0,setTimeout((function(){e.isAnimated=!1}),1e3);var t=new Audio(n("d863"));t.play()},makeUrl:function(e){return n("65a8")("./".concat(e))},toggleNotifications:function(){this.showNotifications=!this.showNotifications,this.showSidebar&&(this.showSidebar=!1)},hideNotifications:function(){this.showNotifications=!1},toggleSidebar:function(){this.showSidebar=!this.showSidebar,this.showUserDropdown&&(this.showUserDropdown=!1),this.showNotifications&&(this.showNotifications=!1)},toggleUserDropdown:function(){this.showUserDropdown=!this.showUserDropdown,this.showSidebar&&(this.showSidebar=!1)},hideSidebar:function(){this.showSidebar=!1},hideUserDropdown:function(){this.showUserDropdown=!1},sendToLanding:function(){"Landing"!==this.$router.history.current.name&&this.$router.push({name:"Landing"})},sendToProfile:function(){"Profile"!==this.$router.history.current.name&&this.$router.push({name:"Profile"})},sendToChatDashboard:function(){"ChatDashboard"!==this.$router.history.current.name&&this.$router.push({name:"ChatDashboard"}),"ChatDashboard"===this.$router.history.current.name&&this.$router.go(this.$router.currentRoute)}}),mounted:function(){this.popupItem=this.$el},created:function(){this.getLoggedInUser&&this.$socket.connect()},directives:{ClickOutside:b.a},sockets:{connect:function(){this.getLoggedInUser&&this.$socket.emit("connectedGlobal",{id:this.getLoggedInUser})},notification:function(e){this.haveUnread=!0,this.receivingMessage=e,this.animateAndPlayMessage()},clearNotification:function(){this.haveUnread=!1}}},M=A,$=(n("e9cb"),Object(f["a"])(M,m,p,!1,null,"7d15d34b",null)),F=$.exports,G=function(e,t){t._c;return t._m(3)},H=[function(e,t){var r=t._c;return r("div",{staticClass:"footer-up"},[r("a",{attrs:{href:"#"}},[r("img",{attrs:{src:n("fe17"),alt:"Facebook"}})]),r("a",{attrs:{href:"#"}},[r("img",{attrs:{src:n("93b0"),alt:"Youtube"}})]),r("a",{attrs:{href:"#"}},[r("img",{attrs:{src:n("aa5f"),alt:"Instagram"}})]),r("a",{attrs:{href:"#"}},[r("img",{attrs:{src:n("3602"),alt:"Github"}})])])},function(e,t){var n=t._c;return n("div",{staticClass:"footer-mid"},[n("span",{staticClass:"email"},[t._v("josip.ivancic23@gmail.com")]),n("span",[t._v("Developed by Josip Ivancic")])])},function(e,t){var n=t._c;return n("div",{staticClass:"footer-down"},[n("span",[t._v("StudentRides 2020 ©")])])},function(e,t){var n=t._c;return n("footer",{staticClass:"footer"},[t._m(0),t._m(1),t._m(2)])}],z={name:"Footer"},q=z,B=(n("f84f"),Object(f["a"])(q,G,H,!0,null,"18f7f6cc",null)),W=B.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"fade",mode:"out-in"}},[e.isLoading?n("div",{staticClass:"overlay"},[n("div",{staticClass:"loading"},[n("div",{staticClass:"lds-ellipsis"},[n("div"),n("div"),n("div"),n("div")])])]):e._e()])},J=[],Y={name:"Loader",computed:Object(i["a"])({},Object(u["c"])(["isLoading"]))},X=Y,Z=(n("f171"),Object(f["a"])(X,V,J,!1,null,"fadd8816",null)),K=Z.exports,Q={name:"App",metaInfo:function(){return{title:"StudentRides",meta:[{name:"description",content:"Posjeti StudentRides, stekni nova poznanstva, uštedi novac i pomozi kolegama studentima. "}]}},components:{TheHeader:F,TheFooter:W,TheSuccess:g,TheLoader:K},computed:Object(i["a"])({},Object(u["c"])(["getLoggedInUser"])),methods:Object(i["a"])({},Object(u["b"])(["deleteExpiredRides","fetchUserData","fetchChats"])),watch:{getLoggedInUser:function(){this.fetchChats(),this.deleteExpiredRides(),this.fetchUserData()}},created:function(){this.getLoggedInUser&&this.fetchChats()}},ee=Q,te=(n("5c0b"),Object(f["a"])(ee,a,s,!1,null,null,null)),ne=te.exports,re=(n("45fc"),n("d3b7"),n("8c4f")),ae=n("0e44"),se=(n("4de4"),n("7db0"),n("96cf"),n("1da1")),ie=n("bc3a"),oe=n.n(ie),ce=n("5a0c"),ue=n.n(ce),de={state:{rides:[],allRides:[],userRides:[],reservedRides:[],rideDetails:{}},getters:{getUserRides:function(e){return e.userRides},getRideDetails:function(e){return e.rideDetails},getRides:function(e){return e.rides},getReservedRides:function(e){return e.reservedRides},getEditingRide:function(e){return e.editingRide},isEditMode:function(e){return e.editRideMode}},mutations:{SET_RIDES:function(e,t){e.rides=t.filteredRides,e.allRides=t.allRides},SET_USER_RIDES:function(e,t){var n=e.allRides.filter((function(e){return e.user===t}));e.userRides=n},SET_RESERVED_RIDES:function(e,t){var n=[];t.reservedRides.forEach((function(t){e.rides.forEach((function(e){e._id===t&&n.push(e)}))})),e.reservedRides=n},ADD_RIDE:function(e,t){e.allRides.push(t),e.userRides.push(t)},SET_RIDE_DETAILS:function(e,t){var n=e.allRides.find((function(e){return e._id===t}));e.rideDetails=n},SET_EDITING_RIDE:function(e,t){var n=ue()(t.date).format(),r=t.id,a=t.start,s=t.end,i=t.contact,o=t.seats,c=t.price,u=t.smoking,d=t.car;e.editingRide={id:r,start:a,end:s,contact:i,seats:o,price:c,smoking:u,car:d,date:n},e.editRideMode=!0}},actions:{fetchRides:function(e){return Object(se["a"])(regeneratorRuntime.mark((function t(){var n,r,a,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=e.rootGetters,t.prev=1,t.next=4,oe.a.get("rides");case 4:a=t.sent,s=a.data.rides.filter((function(e){return e.user!==r.getLoggedInUser})),i=a.data.rides,n("SET_RIDES",{filteredRides:s,allRides:i}),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),console.error(t.t0.response);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},fetchUserRides:function(e){var t=e.commit,n=e.rootGetters;try{t("SET_USER_RIDES",n.getLoggedInUser)}catch(r){console.error(r.response)}},fetchRideDetails:function(e,t){var n=e.commit;try{n("SET_RIDE_DETAILS",t),"RideDetails"!==Xe.currentRoute.name&&Xe.push({name:"RideDetails"})}catch(r){console.error(r.response)}},fetchReservedRides:function(e){var t=e.commit,n=e.rootGetters;try{t("SET_RESERVED_RIDES",n.getUserData)}catch(r){console.error(r.response)}},postRide:function(e,t){return Object(se["a"])(regeneratorRuntime.mark((function n(){var r,a,s,i,o,c,u,d,l,f,h,g;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=e.rootGetters,n.prev=1,s=t.start,i=t.end,o=t.date,c=t.startTime,u=t.contact,d=t.seats,l=t.price,f=t.smoking,h=t.car,n.next=5,oe.a.post("rides",{start:s,end:i,date:o,startTime:c,contact:u,seats:d,price:l,userId:a.getLoggedInUser,smoking:f,car:h});case 5:g=n.sent,r("ADD_RIDE",g.data.ride),Xe.push({name:"Profile"}),n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](1),console.error(n.t0.response);case 13:case"end":return n.stop()}}),n,null,[[1,10]])})))()},reserveRide:function(e,t){return Object(se["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,n.prev=1,n.next=4,oe.a.post("rides/ride/".concat(t.rideId),{userId:t.userId});case 4:return n.next=6,r("fetchRides");case 6:r("fetchRideDetails",t.rideId),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](1),console.error(n.t0.response);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})))()},deleteRide:function(e,t){return Object(se["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,n.prev=1,n.next=4,oe.a.delete("rides/ride/".concat(t));case 4:return n.next=6,r("fetchRides");case 6:r("fetchUserRides"),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](1),console.error(n.t0.response);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})))()},removeUserFromRide:function(e,t){return Object(se["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,n.prev=1,n.next=4,oe.a.patch("rides/ride/".concat(t.rideId),{userId:t.userId});case 4:r("fetchRideDetails",t.rideId),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),console.error(n.t0.response);case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))()},editRideMode:function(e,t){var n=ue()(t.date).format(),r=t.id,a=t.start,s=t.end,i=t.startTime,o=t.contact,c=t.seats,u=t.price,d=t.smoking,l=t.car;Xe.push({name:"CreateRide",params:{id:r,start:a,end:s,startTime:i,contact:o,seats:c,price:u,smoking:d,car:l,date:n,editMode:!0}})},editRide:function(e,t){return Object(se["a"])(regeneratorRuntime.mark((function n(){var r,a,s,i,o,c,u,d,l,f;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,console.log(t),n.prev=2,"yes"===t.smoking?t.smoking=!0:t.smoking=!1,a=t.id,s=t.start,i=t.end,o=t.startTime,c=t.contact,u=t.seats,d=t.date,l=t.price,f=t.car,n.next=7,oe.a.put("rides/ride/".concat(t.id),{id:a,start:s,end:i,date:d,startTime:o,contact:c,seats:u,price:l,car:f,smoking:t.smoking});case 7:return n.next=9,r("fetchRides");case 9:Xe.push({name:"Profile"}),n.next=15;break;case 12:n.prev=12,n.t0=n["catch"](2),console.error(n.t0.response);case 15:case"end":return n.stop()}}),n,null,[[2,12]])})))()},deleteExpiredRides:function(){oe.a.delete("rides/expired")}}},le={state:{loggedIn:!1,jwtToken:null,loggedInUser:null,registeringUser:null},getters:{isLoggedIn:function(e){return e.loggedIn},getJWT:function(e){return e.jwtToken},getLoggedInUser:function(e){return e.loggedInUser},getRegisteringUser:function(e){return e.registeringUser}},mutations:{SET_LOGGED_IN:function(e,t){e.loggedIn=!0,e.jwtToken=t.token,e.loggedInUser=t.userId},REGISTER_USER:function(e,t){e.registeringUser=t},LOGIN_FAILED:function(e,t){e.error=t},LOGOUT:function(e){e.jwtToken=null,e.loggedIn=!1}},actions:{loginUser:function(e,t){return Object(se["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.prev=1,n.next=4,oe.a.post("auth/login",{email:t.email,password:t.password});case 4:a=n.sent,r("SET_LOGGED_IN",a.data),Xe.push({name:"Rides"}),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](1),console.error(n.t0.response);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})))()},logout:function(e){return Object(se["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.commit,n("LOGOUT"),location.reload();case 3:case"end":return t.stop()}}),t)})))()},registerUser:function(e,t){return Object(se["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.prev=1,n.next=4,oe.a.post("auth/register",{name:t.name,lastname:t.lastname,email:t.email,password:t.password});case 4:a=n.sent,r("REGISTER_USER",a.data.userId),Xe.push({name:"RegistrationSuccess",params:{userId:a.data.userId}}),n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](1),console.error(n.t0.response);case 13:case"end":return n.stop()}}),n,null,[[1,10]])})))()},confirmAccount:function(e,t){return Object(se["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.prev=1,n.next=4,oe.a.get("/auth/user/confirmation/".concat(t));case 4:a=n.sent,r("SET_LOGGED_IN",a.data),Xe.push({name:"Rides"}),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](1),console.error(n.t0.response);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})))()},resendConfirmationEmail:function(e,t){return Object(se["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oe.a.get("/auth/user/confirmation/resend/".concat(t));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),console.error(e.t0.response);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()},requestResetPassword:function(e,t){return Object(se["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oe.a.post("auth/forgotpassword",t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),console.error(e.t0.response);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()},resetPassword:function(e,t){return Object(se["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.prev=1,n.next=4,oe.a.patch("auth/resetpassword/".concat(t.id),{password:t.password});case 4:a=n.sent,r("SET_LOGGED_IN",a.data),Xe.push({name:"Rides"}),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](1),console.error(n.t0.response);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})))()}}},fe=(n("a4d3"),n("e01a"),{state:{userData:{},photo:null,searchedUserData:{},editingUser:{}},getters:{getUserData:function(e){return e.userData},getSearchedUserData:function(e){return e.searchedUserData},getEditingUser:function(e){return e.editingUser},getPhoto:function(e){return e.photo}},mutations:{SET_USER_DATA:function(e,t){e.userData=t,e.photo=t.photo},SET_SEARCHED_USER_DATA:function(e,t){e.searchedUserData=t},SET_USER_NOTIFICATIONS:function(e,t){e.userData.notifications=t},DELETE_NOTIFICATIONS:function(e){e.userData.notifications=[]},SET_PHOTO:function(e){e.photo=e.userData.photo},SET_UPLOADED_PHOTO:function(e,t){e.photo=t}},actions:{fetchUserData:function(e){return Object(se["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=e.rootGetters,t.prev=1,t.next=4,oe.a.get("user/".concat(r.getLoggedInUser),{headers:{"Cache-Control":"no-cache"}});case 4:return a=t.sent,t.next=7,n("SET_USER_DATA",a.data.user);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),console.error(t.t0.response);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},fetchUserById:function(e,t){return Object(se["a"])(regeneratorRuntime.mark((function n(){var r,a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=e.rootGetters,n.prev=1,n.next=4,oe.a.get("user/".concat(t));case 4:s=n.sent,s.data.user._id===a.getLoggedInUser?Xe.push({name:"Profile"}):(r("SET_SEARCHED_USER_DATA",s.data.user),Xe.push({name:"UserDetails"})),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](1),console.error(n.t0.response);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))()},editProfile:function(e,t){return Object(se["a"])(regeneratorRuntime.mark((function n(){var r,a,s,i,o,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,a=e.rootGetters,n.prev=1,s=t.name,i=t.lastname,o=t.contact,c=t.description,n.next=5,oe.a.patch("user/edit/".concat(a.getLoggedInUser),{name:s,lastname:i,contact:o,description:c});case 5:return n.next=7,r("fetchUserData");case 7:Xe.push({name:"Profile"}),n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](1),console.error(n.t0.response);case 13:case"end":return n.stop()}}),n,null,[[1,10]])})))()},readNotification:function(e,t){return Object(se["a"])(regeneratorRuntime.mark((function n(){var r,a,s,i,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=e.dispatch,n.prev=1,s=t.userId,i=t.notificationId,n.next=5,oe.a.patch("/user/notifications/",{userId:s,notificationId:i});case 5:return o=n.sent,r("SET_USER_NOTIFICATIONS",o.data.notifications),n.next=9,a("fetchRides",null,{root:!0});case 9:a("fetchRideDetails",t.rideId,{root:!0}),n.next=15;break;case 12:n.prev=12,n.t0=n["catch"](1),console.error(n.t0.response);case 15:case"end":return n.stop()}}),n,null,[[1,12]])})))()},readAllNotifications:function(e,t){return Object(se["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.prev=1,n.next=4,oe.a.delete("/user/notifications/".concat(t));case 4:r("DELETE_NOTIFICATIONS"),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),console.error(n.t0.response);case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))()},uploadPhoto:function(e,t){return Object(se["a"])(regeneratorRuntime.mark((function n(){var r,a,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=e.rootGetters,n.prev=1,s=new FormData,s.append("file",t,t.name),n.next=6,oe.a.patch("user/".concat(a.getLoggedInUser,"/photo"),s);case 6:i=n.sent,r("SET_UPLOADED_PHOTO",i.data.data),n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](1),console.error(n.t0.response);case 13:case"end":return n.stop()}}),n,null,[[1,10]])})))()}}}),he={state:{chats:[],chatIndex:0},getters:{getChats:function(e){return e.chats},getChatIndex:function(e){return e.chatIndex}},mutations:{SET_CHATS:function(e,t){e.chats=t},SET_CHAT_INDEX:function(e,t){e.chatIndex=t}},actions:{fetchChats:function(e){return Object(se["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=e.rootGetters,t.prev=1,t.next=4,oe.a.get("/chats/".concat(r.getLoggedInUser));case 4:a=t.sent,n("SET_CHATS",a.data.chats),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.error(t.t0.response);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},deleteChat:function(e,t){return Object(se["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,n.prev=1,n.next=4,oe.a.delete("/chats/chat/".concat(t));case 4:r("fetchChats"),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),console.error(n.t0.response);case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))()},createNewChat:function(e,t){return Object(se["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,n.prev=1,n.next=4,oe.a.post("/chats/chat/create",t);case 4:r("fetchChats"),"ChatDashboard"!==Xe.history.current.name&&Xe.push({name:"ChatDashboard"}),n.next=12;break;case 8:n.prev=8,n.t0=n["catch"](1),"ChatDashboard"!==Xe.history.current.name&&Xe.push({name:"ChatDashboard"}),console.error(n.t0.response);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))()},openChat:function(e,t){var n=e.commit;n("SET_CHAT_INDEX",t),"Chat"!==Xe.history.current.name&&Xe.push({name:"Chat"})}}};r["a"].use(u["a"]);var ge=new u["a"].Store({state:{loading:!1,successMessage:"",isSuccess:!1,errorMessage:"",isError:!1},plugins:[Object(ae["a"])({storage:window.localStorage,reducer:function(e){return e.authModule.loggedIn?e:{}}})],getters:{isLoading:function(e){return e.loading},isError:function(e){return e.isError},isSuccess:function(e){return e.isSuccess},getErrorMessage:function(e){return e.errorMessage},getSuccessMessage:function(e){return e.successMessage}},mutations:{ERROR:function(e,t){e.errorMessage=t,e.isError=!0},CLEAR_ERROR:function(e){e.isError=!1},SUCCESS:function(e,t){e.successMessage=t,e.isSuccess=!0},CLEAR_SUCCESS:function(e){e.isSuccess=!1}},modules:{ridesModule:de,authModule:le,chatModule:he,userModule:fe}}),me=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},pe=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{attrs:{id:"landing"}},[n("section",{attrs:{id:"showcase"}},[n("AppShowcase")],1),n("section",{attrs:{id:"reasons"}},[n("AppReasons")],1),n("section",{attrs:{id:"start"}},[n("AppStart")],1)])}],ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"reasons-container"},[n("div",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],staticClass:"reason reason-one spacing"},[e._m(0),e._m(1)]),n("div",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],staticClass:"reason reason-two spacing"},[e._m(2),e._m(3)]),n("div",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],staticClass:"reason reason-three spacing"},[e._m(4),e._m(5)])])},be=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"icon"},[r("img",{attrs:{src:n("99e2"),alt:""}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"reason-desc"},[n("h3",{staticClass:"heading-3"},[e._v(" Povoljno ")]),e._v(" Jako povoljan prijevoz za svakog studenta ")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"icon"},[r("img",{attrs:{src:n("5056"),alt:""}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"reason-desc"},[n("h3",{staticClass:"heading-3"},[e._v(" Putuj brže ")]),e._v(" Putovanja su mnogo brža i praktičnija nego s busevima ")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"icon"},[r("img",{attrs:{src:n("04ba"),alt:""}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"reason-desc"},[n("h3",{staticClass:"heading-3"},[e._v(" Poveži se ")]),e._v(" Steci velik broj novih poznanstava danas ")])}],we=(n("0730"),{}),Re=Object(f["a"])(we,ve,be,!1,null,"09b79622",null),_e=Re.exports,De=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"showcase"},[n("div",{staticClass:"showcase-heading spacing"},[n("h1",{staticClass:"heading-1"},[e._v("Studentske vožnje")]),n("p",{staticClass:"desc"},[e._v(" Stekni nova poznanstva, uštedi novac i pomozi kolegama studentima. ")]),e.isLoggedIn?n("div",{staticClass:"buttons"},[n("router-link",{staticClass:"btn",attrs:{to:{name:"Rides"},tag:"button"}},[e._v("Pronadji vožnju")]),n("router-link",{staticClass:"btn btn-secondary",attrs:{to:{name:"CreateRide"},tag:"button"}},[e._v("Postavi vožnju")])],1):n("div",{staticClass:"buttons"},[n("router-link",{staticClass:"btn",attrs:{to:{name:"Login"},tag:"button"}},[e._v("Pronadji vožnju")]),n("router-link",{staticClass:"btn btn-secondary",attrs:{to:{name:"Register"},tag:"button"}},[e._v("Registriraj se")])],1)]),e._m(0)])},ke=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"showcase-image"},[r("img",{attrs:{src:n("3ee0"),alt:""}})])}],xe={name:"Showcase",computed:Object(i["a"])({},Object(u["c"])(["isLoggedIn"]))},Ce=xe,je=(n("479c"),Object(f["a"])(Ce,De,ke,!1,null,"1f4a2534",null)),Ee=je.exports,Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"start spacing"},[n("h1",{staticClass:"heading-1"},[e._v(" Započni danas! ")]),e.isLoggedIn?n("div",{staticClass:"buttons"},[n("router-link",{staticClass:"btn",attrs:{to:{name:"Rides"},tag:"button"}},[e._v("Pronađi vožnju")]),n("router-link",{staticClass:"btn btn-secondary",attrs:{to:{name:"CreateRide"},tag:"button"}},[e._v("Postavi vožnju")])],1):n("div",{staticClass:"buttons"},[n("router-link",{staticClass:"btn",attrs:{to:{name:"Login"},tag:"button"}},[e._v("Prijavi se")]),n("router-link",{staticClass:"btn btn-secondary",attrs:{to:{name:"Register"},tag:"button"}},[e._v("Registracija")])],1)])},Se=[],Ue={name:"Start",computed:Object(i["a"])({},Object(u["c"])(["isLoggedIn"]))},Ie=Ue,Ne=(n("9221"),Object(f["a"])(Ie,Oe,Se,!1,null,"f39271e6",null)),Pe=Ne.exports,Te={name:"Landing",components:{AppShowcase:Ee,AppReasons:_e,AppStart:Pe},data:function(){return{}},computed:Object(i["a"])({},Object(u["c"])(["isLoggedIn"]))},Le=Te,ye=(n("7f21"),Object(f["a"])(Le,me,pe,!1,null,"0dc9091c",null)),Ae=ye.exports,Me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-container"},[n("h2",{staticClass:"heading-2"},[e._v(" "+e._s(e.receiverName)+" ")]),n("ul",{ref:"chat",staticClass:"chat"},[e._l(e.messages,(function(t){return n("li",{key:t._id,staticClass:"chat-message"},[n("div",{staticClass:"name"},[e._v(" "+e._s(t.from)+" ")]),n("div",{staticClass:"content"},[e._v(e._s(t.content))]),n("div",{staticClass:"timestamp"},[e._v(e._s(e.formatDate(t.createdAt)))])])})),n("transition",{attrs:{name:"fade",mode:"out-in"}},[e.typing?n("small",[e._v(e._s(e.receiverName)+" piše...")]):e._e()])],2),n("form",{on:{submit:function(t){return t.preventDefault(),e.sendMessage({room:e.chat._id,sender:e.getUserData._id,receiver:e.chat.sender===e.getUserData._id?e.chat.receiver:e.chat.sender,message:{from:e.getUserData.name,content:e.message,receiverHasRead:!1,sender:e.getUserData._id,receiver:e.chat.sender===e.getUserData._id?e.chat.receiver:e.chat.sender}})}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],attrs:{placeholder:"Upiši poruku",type:"text"},domProps:{value:e.message},on:{focus:function(t){return e.readMessages({sender:e.getUserData._id})},input:function(t){t.target.composing||(e.message=t.target.value)}}}),n("button",{staticClass:"btn",class:{disabled:!e.message},attrs:{type:"submit",disabled:!e.message}},[e._v(" Pošalji ")])])])},$e=[],Fe=(n("99af"),n("1c1c")),Ge=n.n(Fe);n("1351");ue.a.extend(Ge.a);var He={name:"Chat",metaInfo:function(){return{meta:[{name:"description",content:"Razgovor sa ".concat(this.receiverName)},{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}]}},data:function(){return{message:null,typing:!1}},computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])(["getChats","getUserData","getSearchedUserData","getLoggedInUser","getChatIndex"])),{},{index:function(){return this.getChatIndex},messages:function(){return this.getChats[this.index].messages},chat:function(){return this.getChats[this.index]},receiverName:function(){return this.chat.senderFullName==="".concat(this.getUserData.name," ").concat(this.getUserData.lastname)?this.chat.receiverFullName:this.chat.senderFullName},chatReceiver:function(){return this.chat.sender===this.getUserData._id?this.chat.receiver:this.chat.sender}}),watch:{message:function(e){e?this.$socket.emit("typing",this.chat._id):this.$socket.emit("stopTyping",this.chat._id)}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["fetchChats"])),{},{formatDate:function(e){if(e)return ue()(e).locale("hr").calendar(null,{sameDay:"[Danas u ] H:mm",nextWeek:"dddd [u] H:mm",lastDay:"[Jučer u] H:mm",lastWeek:"[Prošli] dddd [u] H:mm",sameElse:"DD/MM/YYYY"})},sendMessage:function(e){e.message.createdAt=ue()().format(),this.message=null,this.$socket.emit("message",e)},readMessages:function(e){this.$socket.emit("readMessages",{room:this.chat._id,sender:this.getUserData._id}),this.messages[this.messages.length-1]&&(this.messages[this.messages.length-1].receiverHasRead=!0),this.$socket.emit("clearNotifications",e)},scrollBottom:function(){var e=this.$refs.chat;e.scrollTop=e.scrollHeight}}),mounted:function(){this.scrollBottom()},updated:function(){this.scrollBottom()},created:function(){var e=this;return Object(se["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$socket.disconnect(),e.$socket.connect(),t.next=4,e.fetchChats();case 4:case"end":return t.stop()}}),t)})))()},sockets:{connect:function(){this.$socket.emit("readMessages",{room:this.chat._id,sender:this.getUserData._id}),this.$socket.emit("connectedRoom",{userId:this.getUserData._id,room:this.chat._id,sender:this.chat.sender,receiver:this.chat.receiver})},typing:function(){this.typing=!0},stopTyping:function(){this.typing=!1},message:function(e){this.messages.push(e)}}},ze=He,qe=(n("d14f"),Object(f["a"])(ze,Me,$e,!1,null,"6ef26208",null)),Be=qe.exports;r["a"].use(re["a"]);var We=function(e,t,n){e.matched.some((function(e){return e.meta.requiresAuth}))&&(ge.state.authModule.loggedIn?n():n({name:"Login"}))},Ve=function(e,t,n){ge.state.authModule.loggedIn?n({name:"Landing"}):n()},Je=[{path:"*",name:"NotFound",component:function(){return n.e("NotFound").then(n.bind(null,"9703"))}},{path:"/",name:"Landing",component:Ae},{path:"/rides",name:"Rides",component:function(){return n.e("Rides").then(n.bind(null,"34e1"))},meta:{requiresAuth:!0},beforeEnter:We},{props:!0,path:"/rides/create",name:"CreateRide",component:function(){return n.e("CreateRide").then(n.bind(null,"89ab"))},meta:{requiresAuth:!0},beforeEnter:We},{path:"/rides/ride-details",name:"RideDetails",component:function(){return n.e("RideDetails").then(n.bind(null,"c99a"))},meta:{requiresAuth:!0},beforeEnter:We},{path:"/auth/login",name:"Login",component:function(){return n.e("Login").then(n.bind(null,"5326"))},beforeEnter:Ve},{path:"/auth/register",name:"Register",component:function(){return n.e("Register").then(n.bind(null,"935e"))},beforeEnter:Ve},{props:!0,path:"/auth/registersuccess",name:"RegistrationSuccess",component:function(){return n.e("RegistrationSuccess").then(n.bind(null,"9c71"))},beforeEnter:Ve},{path:"/auth/confirmaccount/:token",name:"ConfirmAccount",component:function(){return n.e("Register").then(n.bind(null,"98d2"))},beforeEnter:function(e,t,n){ge.state.authModule.loggedIn?n({name:"Landing"}):n()}},{path:"/auth/forgotpassword",name:"ForgotPassword",component:function(){return n.e("ForgotPassword").then(n.bind(null,"fa67"))},beforeEnter:Ve},{path:"/auth/newpassword/:id",name:"NewPassword",component:function(){return n.e("NewPassword").then(n.bind(null,"36e2"))},beforeEnter:Ve},{path:"/user/profile",name:"Profile",component:function(){return n.e("Profile").then(n.bind(null,"3292"))},meta:{requiresAuth:!0},beforeEnter:We},{path:"/users/user",name:"UserDetails",component:function(){return n.e("UserDetails").then(n.bind(null,"4c0c"))},meta:{requiresAuth:!0},beforeEnter:We},{path:"/user/edit",name:"EditProfile",component:function(){return n.e("EditProfile").then(n.bind(null,"9add"))},meta:{requiresAuth:!0},beforeEnter:We},{path:"/user/chat-dashboard/",name:"ChatDashboard",component:function(){return n.e("ChatDashboard").then(n.bind(null,"8ab5"))},meta:{requiresAuth:!0},beforeEnter:We},{props:!0,path:"/user/chat-dashboard/chat",name:"Chat",component:Be,meta:{requiresAuth:!0},beforeEnter:We}],Ye=new re["a"]({mode:"history",scrollBehavior:function(){return{x:0,y:0}},base:"/",routes:Je}),Xe=Ye,Ze=n("7bb1"),Ke=n("4c93");Object(Ze["e"])("eager"),Object(Ze["c"])({classes:{valid:"valid",invalid:"invalid"}}),Object(Ze["d"])("email",Object(i["a"])(Object(i["a"])({},Ke["d"]),{},{message:"Unesite valjan email"})),Object(Ze["d"])("password",{validate:function(e){var t=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,20}$/;return t.test(e)},message:"Lozinka mora imati najmanje 6 znakova, jedno veliko slovo i broj"}),Object(Ze["d"])("required",Object(i["a"])(Object(i["a"])({},Ke["g"]),{},{message:"Ovo polje ne može biti prazno"})),Object(Ze["d"])("alpha",Object(i["a"])(Object(i["a"])({},Ke["a"]),{},{message:"Dopuštena samo slova"})),Object(Ze["d"])("between",Object(i["a"])(Object(i["a"])({},Ke["b"]),{},{message:"Vrijednost mora biti između 1 i 100"})),Object(Ze["d"])("min",Object(i["a"])(Object(i["a"])({},Ke["e"]),{},{message:"Polje mora imati najmanje 6 znakova"})),Object(Ze["d"])("minmax",{validate:function(e,t){var n=t.min,r=t.max;return e.length>=n&&e.length<=r},params:["min","max"],message:"Polje mora imati između {min} i {max} znakova"}),Object(Ze["d"])("confirmed",Object(i["a"])(Object(i["a"])({},Ke["c"]),{},{message:"Lozinke se ne podudaraju"})),Object(Ze["d"])("numeric",Object(i["a"])(Object(i["a"])({},Ke["f"]),{},{message:"Mora biti broj"})),Object(Ze["d"])("minmax_value",{validate:function(e,t){var n=t.min,r=t.max;return e>=n&&e<=r},params:["min","max"],message:"Vrijednost mora biti između {min} i {max}"});var Qe=n("ed18"),et=n.n(Qe);et.a.config(),oe.a.defaults.baseURL="http://localhost:3000",oe.a.interceptors.request.use((function(e){ge.state.loading=!0;var t=ge.getters.getJWT;return e.headers.Authorization=t?"Bearer ".concat(t):"",e})),oe.a.interceptors.response.use((function(e){return ge.state.loading=!1,e.data.message&&(ge.commit("SUCCESS",e.data.message),setTimeout((function(){ge.commit("CLEAR_SUCCESS",e.message)}),3e3)),e}),(function(e){return ge.state.loading=!1,"jwt expired"!==e.response.data.error&&"Not authenticated"!==e.response.data.error||ge.dispatch("logout"),e.response.data.error&&(ge.commit("ERROR",e.response.data),setTimeout((function(){ge.commit("CLEAR_ERROR")}),3e3)),Promise.reject(e)}));var tt=n("58ca"),nt=new IntersectionObserver((function(e,t){e.forEach((function(e){e.isIntersecting&&(e.target.classList.add("enter"),t.unobserve(e.target))}))})),rt={bind:function(e){e.classList.add("before-enter"),nt.observe(e)}},at=n("8055"),st=n.n(at),it=n("5132"),ot=n.n(it);r["a"].directive("scrollanimation",rt),r["a"].use(tt["a"],{refreshOnceOnNavigation:!0}),r["a"].use(new ot.a({options:{autoConnect:!1},debug:!1,connection:st()("".concat("http://localhost:3000"))})),r["a"].config.productionTip=!1,new r["a"]({router:Xe,store:ge,render:function(e){return e(ne)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var r=n("9c0c"),a=n.n(r);a.a},"65a8":function(e,t,n){var r={"./car.svg":"cca8","./carBlack.svg":"9b2d","./check.svg":"5236","./checkWhite.svg":"cb4a","./chevronDown.svg":"2119","./desc.svg":"d3dd","./edit.svg":"8399","./email.svg":"a96b","./fb.svg":"fe17","./friends.svg":"04ba","./gh.svg":"3602","./home.svg":"4b8a","./ig.svg":"aa5f","./login.svg":"00ae","./logout.svg":"24fc","./magnifier.svg":"33c3","./map.svg":"5056","./menu.svg":"3ff5","./message.svg":"6d6b","./messagewhite.svg":"e3e6","./minus.svg":"c178","./notfound.svg":"4759","./notifications.svg":"7028","./path.svg":"302b","./phone.svg":"9855","./places.svg":"805e","./plus.svg":"8c7a","./save.svg":"99e2","./trash.svg":"dab5","./trashblack.svg":"7698","./user.svg":"7393","./useradd.svg":"e601","./x.svg":"4ab2","./xWhite.svg":"478a","./yt.svg":"93b0"};function a(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=s,e.exports=a,a.id="65a8"},"6d6b":function(e,t,n){e.exports=n.p+"img/message.3899ae1c.svg"},7028:function(e,t,n){e.exports=n.p+"img/notifications.3cd41e35.svg"},7393:function(e,t,n){e.exports=n.p+"img/user.3cc5d1be.svg"},7698:function(e,t,n){e.exports=n.p+"img/trashblack.0bcdac45.svg"},"7c7c":function(e,t,n){},"7d07":function(e,t,n){"use strict";var r=n("7c7c"),a=n.n(r);a.a},"7f21":function(e,t,n){"use strict";var r=n("1118"),a=n.n(r);a.a},"805e":function(e,t,n){e.exports=n.p+"img/places.d5fc850a.svg"},8399:function(e,t,n){e.exports=n.p+"img/edit.45d0602e.svg"},"8a89":function(e,t,n){},"8c7a":function(e,t,n){e.exports=n.p+"img/plus.4874204c.svg"},9221:function(e,t,n){"use strict";var r=n("f9b1"),a=n.n(r);a.a},"93b0":function(e,t,n){e.exports=n.p+"img/yt.57cdb66a.svg"},9855:function(e,t,n){e.exports=n.p+"img/phone.09d42ec9.svg"},"99e2":function(e,t,n){e.exports=n.p+"img/save.bf1300d9.svg"},"9b2d":function(e,t,n){e.exports=n.p+"img/carBlack.a2050399.svg"},"9c0c":function(e,t,n){},a96b:function(e,t,n){e.exports=n.p+"img/email.d6e20987.svg"},aa5f:function(e,t,n){e.exports=n.p+"img/ig.499c99d6.svg"},acdc:function(e,t,n){},baf5:function(e,t,n){"use strict";var r=n("1ba5"),a=n.n(r);a.a},c178:function(e,t,n){e.exports=n.p+"img/minus.0148c109.svg"},c468:function(e,t,n){},c47a:function(e,t,n){},c99c:function(e,t,n){"use strict";var r=n("4316"),a=n.n(r);a.a},cb4a:function(e,t,n){e.exports=n.p+"img/checkWhite.bb0ab022.svg"},cca8:function(e,t,n){e.exports=n.p+"img/car.c385bf50.svg"},cccc:function(e,t,n){},cd5d:function(e,t,n){"use strict";var r=n("cccc"),a=n.n(r);a.a},d14f:function(e,t,n){"use strict";var r=n("c468"),a=n.n(r);a.a},d3dd:function(e,t,n){e.exports=n.p+"img/desc.dedd0bf3.svg"},d863:function(e,t,n){e.exports=n.p+"media/message.9fd5812c.mp3"},dab5:function(e,t,n){e.exports=n.p+"img/trash.981417c3.svg"},e3e6:function(e,t,n){e.exports=n.p+"img/messagewhite.a991618f.svg"},e601:function(e,t,n){e.exports=n.p+"img/useradd.740e6cc7.svg"},e9cb:function(e,t,n){"use strict";var r=n("acdc"),a=n.n(r);a.a},f171:function(e,t,n){"use strict";var r=n("5466"),a=n.n(r);a.a},f84f:function(e,t,n){"use strict";var r=n("c47a"),a=n.n(r);a.a},f9b1:function(e,t,n){},fe17:function(e,t,n){e.exports=n.p+"img/fb.4c6310fc.svg"}});
//# sourceMappingURL=app.04d21527.js.map